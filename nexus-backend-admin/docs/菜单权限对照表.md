# èœå•æƒé™å¯¹ç…§è¡¨

## ğŸ“‹ èœå•ç»“æ„æ€»è§ˆ

```
nexus-boot ç®¡ç†ç³»ç»Ÿ
â”œâ”€ ç³»ç»Ÿç®¡ç† (ID: 1) /system
â”‚  â”œâ”€ ç”¨æˆ·ç®¡ç† (ID: 100) /system/user
â”‚  â”‚  â”œâ”€ æŸ¥è¯¢ (ID: 1001) system:user:query
â”‚  â”‚  â”œâ”€ æ–°å¢ (ID: 1002) system:user:create
â”‚  â”‚  â”œâ”€ ç¼–è¾‘ (ID: 1003) system:user:update
â”‚  â”‚  â””â”€ åˆ é™¤ (ID: 1004) system:user:delete
â”‚  â”‚
â”‚  â”œâ”€ è§’è‰²ç®¡ç† (ID: 101) /system/role
â”‚  â”‚  â”œâ”€ æŸ¥è¯¢ (ID: 1011) system:role:query
â”‚  â”‚  â”œâ”€ æ–°å¢ (ID: 1012) system:role:create
â”‚  â”‚  â”œâ”€ ç¼–è¾‘ (ID: 1013) system:role:update
â”‚  â”‚  â”œâ”€ åˆ é™¤ (ID: 1014) system:role:delete
â”‚  â”‚  â””â”€ åˆ†é…æƒé™ (ID: 1015) system:role:assign-menu
â”‚  â”‚
â”‚  â””â”€ èœå•ç®¡ç† (ID: 102) /system/menu
â”‚     â”œâ”€ æŸ¥è¯¢ (ID: 1021) system:menu:query
â”‚     â”œâ”€ æ–°å¢ (ID: 1022) system:menu:create
â”‚     â”œâ”€ ç¼–è¾‘ (ID: 1023) system:menu:update
â”‚     â””â”€ åˆ é™¤ (ID: 1024) system:menu:delete
â”‚
â””â”€ ç ”å‘å·¥å…· (ID: 2) /dev
   â””â”€ ä»£ç ç”Ÿæˆ (ID: 200) /dev/codegen
      â”œâ”€ æŸ¥è¯¢ (ID: 2001) codegen:table:query
      â”œâ”€ å¯¼å…¥ (ID: 2002) codegen:table:import
      â”œâ”€ ç¼–è¾‘ (ID: 2003) codegen:table:update
      â”œâ”€ åˆ é™¤ (ID: 2004) codegen:table:delete
      â”œâ”€ é¢„è§ˆ (ID: 2005) codegen:table:preview
      â””â”€ ç”Ÿæˆ (ID: 2006) codegen:table:generate
```

---

## ğŸ“Š è¯¦ç»†èœå•è¡¨

### 1. ç³»ç»Ÿç®¡ç†æ¨¡å—

| ID | å±‚çº§ | èœå•åç§° | æƒé™æ ‡è¯† | è·¯ç”±è·¯å¾„ | ç»„ä»¶è·¯å¾„ |
|-----|------|---------|---------|----------|----------|
| **1** | ç›®å½• | **ç³»ç»Ÿç®¡ç†** | - | `/system` | `Layout` |
| 100 | èœå• | ç”¨æˆ·ç®¡ç† | `system:user:query` | `user` | `system/user/UserList` |
| 1001 | æŒ‰é’® | â””â”€ æŸ¥è¯¢ | `system:user:query` | - | - |
| 1002 | æŒ‰é’® | â””â”€ æ–°å¢ | `system:user:create` | - | - |
| 1003 | æŒ‰é’® | â””â”€ ç¼–è¾‘ | `system:user:update` | - | - |
| 1004 | æŒ‰é’® | â””â”€ åˆ é™¤ | `system:user:delete` | - | - |
| 101 | èœå• | è§’è‰²ç®¡ç† | `system:role:query` | `role` | `system/role/index` |
| 1011 | æŒ‰é’® | â””â”€ æŸ¥è¯¢ | `system:role:query` | - | - |
| 1012 | æŒ‰é’® | â””â”€ æ–°å¢ | `system:role:create` | - | - |
| 1013 | æŒ‰é’® | â””â”€ ç¼–è¾‘ | `system:role:update` | - | - |
| 1014 | æŒ‰é’® | â””â”€ åˆ é™¤ | `system:role:delete` | - | - |
| 1015 | æŒ‰é’® | â””â”€ åˆ†é…æƒé™ | `system:role:assign-menu` | - | - |
| 102 | èœå• | èœå•ç®¡ç† | `system:menu:query` | `menu` | `system/menu/index` |
| 1021 | æŒ‰é’® | â””â”€ æŸ¥è¯¢ | `system:menu:query` | - | - |
| 1022 | æŒ‰é’® | â””â”€ æ–°å¢ | `system:menu:create` | - | - |
| 1023 | æŒ‰é’® | â””â”€ ç¼–è¾‘ | `system:menu:update` | - | - |
| 1024 | æŒ‰é’® | â””â”€ åˆ é™¤ | `system:menu:delete` | - | - |

### 2. ç ”å‘å·¥å…·æ¨¡å—

| ID | å±‚çº§ | èœå•åç§° | æƒé™æ ‡è¯† | è·¯ç”±è·¯å¾„ | ç»„ä»¶è·¯å¾„ |
|-----|------|---------|---------|----------|----------|
| **2** | ç›®å½• | **ç ”å‘å·¥å…·** | - | `/dev` | `Layout` |
| 200 | èœå• | ä»£ç ç”Ÿæˆ | `codegen:table:query` | `codegen` | `codegen/TableList` |
| 2001 | æŒ‰é’® | â””â”€ æŸ¥è¯¢ | `codegen:table:query` | - | - |
| 2002 | æŒ‰é’® | â””â”€ å¯¼å…¥ | `codegen:table:import` | - | - |
| 2003 | æŒ‰é’® | â””â”€ ç¼–è¾‘ | `codegen:table:update` | - | - |
| 2004 | æŒ‰é’® | â””â”€ åˆ é™¤ | `codegen:table:delete` | - | - |
| 2005 | æŒ‰é’® | â””â”€ é¢„è§ˆ | `codegen:table:preview` | - | - |
| 2006 | æŒ‰é’® | â””â”€ ç”Ÿæˆ | `codegen:table:generate` | - | - |

---

## ğŸ¯ æƒé™æ ‡è¯†è§„èŒƒ

### å‘½åè§„åˆ™
```
æ ¼å¼ï¼šæ¨¡å—:åŠŸèƒ½:æ“ä½œ
ç¤ºä¾‹ï¼šsystem:user:create
```

### æ“ä½œç±»å‹
- `query` - æŸ¥è¯¢/æŸ¥çœ‹
- `create` - æ–°å¢/åˆ›å»º
- `update` - æ›´æ–°/ç¼–è¾‘
- `delete` - åˆ é™¤
- `import` - å¯¼å…¥
- `export` - å¯¼å‡º
- `preview` - é¢„è§ˆ
- `generate` - ç”Ÿæˆ
- `assign-menu` - åˆ†é…èœå•ï¼ˆç‰¹æ®Šæ“ä½œï¼‰

---

## ğŸ”— åç«¯æ¥å£å¯¹ç…§

### ç”¨æˆ·ç®¡ç†æ¥å£
| æƒé™æ ‡è¯† | æ¥å£è·¯å¾„ | æ–¹æ³• |
|---------|----------|------|
| `system:user:query` | `/api/system/user/page` | GET |
| `system:user:create` | `/api/system/user` | POST |
| `system:user:update` | `/api/system/user/{id}` | PUT |
| `system:user:delete` | `/api/system/user/{id}` | DELETE |

### è§’è‰²ç®¡ç†æ¥å£
| æƒé™æ ‡è¯† | æ¥å£è·¯å¾„ | æ–¹æ³• |
|---------|----------|------|
| `system:role:query` | `/api/system/role/list` | GET |
| `system:role:create` | `/api/system/role` | POST |
| `system:role:update` | `/api/system/role/{id}` | PUT |
| `system:role:delete` | `/api/system/role/{id}` | DELETE |
| `system:role:assign-menu` | `/api/system/role/assign-menu` | POST |

### èœå•ç®¡ç†æ¥å£
| æƒé™æ ‡è¯† | æ¥å£è·¯å¾„ | æ–¹æ³• |
|---------|----------|------|
| `system:menu:query` | `/api/system/menu/tree` | GET |
| `system:menu:create` | `/api/system/menu` | POST |
| `system:menu:update` | `/api/system/menu/{id}` | PUT |
| `system:menu:delete` | `/api/system/menu/{id}` | DELETE |

### ä»£ç ç”Ÿæˆæ¥å£
| æƒé™æ ‡è¯† | æ¥å£è·¯å¾„ | æ–¹æ³• |
|---------|----------|------|
| `codegen:table:query` | `/api/codegen/tables` | GET |
| `codegen:table:import` | `/api/codegen/import` | POST |
| `codegen:table:update` | `/api/codegen/tables/{id}` | PUT |
| `codegen:table:delete` | `/api/codegen/tables/{id}` | DELETE |
| `codegen:table:preview` | `/api/codegen/preview/{id}` | GET |
| `codegen:table:generate` | `/api/codegen/generate/{id}` | POST |

---

## ğŸ“ ä½¿ç”¨è¯´æ˜

### 1. åˆå§‹åŒ–èœå•æ•°æ®

**å…¨æ–°å®‰è£…ï¼ˆæ¨èï¼‰ï¼š**
```bash
mysql -u root -p database_name < init_menu_full.sql
```

**å·²æœ‰ç³»ç»Ÿï¼ˆå¢é‡æ›´æ–°ï¼‰ï¼š**
```bash
mysql -u root -p database_name < V20251003_5__update_menu_codegen.sql
```

### 2. æŸ¥çœ‹å½“å‰èœå•

```sql
-- æŸ¥çœ‹æ‰€æœ‰èœå•ï¼ˆæ ‘å½¢ç»“æ„ï¼‰
SELECT 
    CONCAT(
        CASE type 
            WHEN 1 THEN 'ğŸ“ ' 
            WHEN 2 THEN 'ğŸ“„ ' 
            WHEN 3 THEN '  â”œâ”€ ' 
        END,
        name
    ) AS èœå•åç§°,
    permission AS æƒé™æ ‡è¯†,
    path AS è·¯ç”±è·¯å¾„,
    component AS ç»„ä»¶è·¯å¾„
FROM system_menu
ORDER BY parent_id, sort;
```

### 3. æŸ¥çœ‹è§’è‰²æƒé™

```sql
-- æŸ¥çœ‹è¶…çº§ç®¡ç†å‘˜çš„æ‰€æœ‰æƒé™
SELECT 
    m.name AS èœå•åç§°,
    m.permission AS æƒé™æ ‡è¯†,
    m.type AS ç±»å‹
FROM system_role_menu rm
JOIN system_menu m ON rm.menu_id = m.id
WHERE rm.role_id = 1
ORDER BY m.id;
```

---

## ğŸ”§ æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°æ¨¡å—

1. **æ·»åŠ ç›®å½•**ï¼ˆID: 3, 4, 5...ï¼‰
```sql
INSERT INTO `system_menu` 
(`id`, `name`, `type`, `sort`, `parent_id`, `path`, `icon`, `component`) 
VALUES (3, 'æ–°æ¨¡å—', 1, 3, 0, '/new-module', 'icon-name', 'Layout');
```

2. **æ·»åŠ èœå•**ï¼ˆID: 300-399ï¼‰
```sql
INSERT INTO `system_menu` 
(`id`, `name`, `permission`, `type`, `sort`, `parent_id`, `path`, `component`) 
VALUES (300, 'åŠŸèƒ½é¡µé¢', 'module:function:query', 2, 1, 3, 'function', 'module/function/index');
```

3. **æ·»åŠ æŒ‰é’®**ï¼ˆID: 3001-3099ï¼‰
```sql
INSERT INTO `system_menu` 
(`id`, `name`, `permission`, `type`, `sort`, `parent_id`) 
VALUES (3001, 'æ“ä½œ', 'module:function:action', 3, 1, 300);
```

---

## ğŸ“… ç‰ˆæœ¬è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | è¯´æ˜ |
|------|------|------|
| v1.0 | 2025-10-03 | åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«ç³»ç»Ÿç®¡ç†å’Œä»£ç ç”Ÿæˆæ¨¡å— |

---

**ğŸ“… åˆ›å»ºæ—¶é—´ï¼š** 2025-10-03  
**ğŸ‘¨â€ğŸ’» ç»´æŠ¤è€…ï¼š** nexus-codegen-team



