# 菜单权限对照表

## 📋 菜单结构总览

```
nexus-boot 管理系统
├─ 系统管理 (ID: 1) /system
│  ├─ 用户管理 (ID: 100) /system/user
│  │  ├─ 查询 (ID: 1001) system:user:query
│  │  ├─ 新增 (ID: 1002) system:user:create
│  │  ├─ 编辑 (ID: 1003) system:user:update
│  │  └─ 删除 (ID: 1004) system:user:delete
│  │
│  ├─ 角色管理 (ID: 101) /system/role
│  │  ├─ 查询 (ID: 1011) system:role:query
│  │  ├─ 新增 (ID: 1012) system:role:create
│  │  ├─ 编辑 (ID: 1013) system:role:update
│  │  ├─ 删除 (ID: 1014) system:role:delete
│  │  └─ 分配权限 (ID: 1015) system:role:assign-menu
│  │
│  └─ 菜单管理 (ID: 102) /system/menu
│     ├─ 查询 (ID: 1021) system:menu:query
│     ├─ 新增 (ID: 1022) system:menu:create
│     ├─ 编辑 (ID: 1023) system:menu:update
│     └─ 删除 (ID: 1024) system:menu:delete
│
└─ 研发工具 (ID: 2) /dev
   └─ 代码生成 (ID: 200) /dev/codegen
      ├─ 查询 (ID: 2001) codegen:table:query
      ├─ 导入 (ID: 2002) codegen:table:import
      ├─ 编辑 (ID: 2003) codegen:table:update
      ├─ 删除 (ID: 2004) codegen:table:delete
      ├─ 预览 (ID: 2005) codegen:table:preview
      └─ 生成 (ID: 2006) codegen:table:generate
```

---

## 📊 详细菜单表

### 1. 系统管理模块

| ID | 层级 | 菜单名称 | 权限标识 | 路由路径 | 组件路径 |
|-----|------|---------|---------|----------|----------|
| **1** | 目录 | **系统管理** | - | `/system` | `Layout` |
| 100 | 菜单 | 用户管理 | `system:user:query` | `user` | `system/user/UserList` |
| 1001 | 按钮 | └─ 查询 | `system:user:query` | - | - |
| 1002 | 按钮 | └─ 新增 | `system:user:create` | - | - |
| 1003 | 按钮 | └─ 编辑 | `system:user:update` | - | - |
| 1004 | 按钮 | └─ 删除 | `system:user:delete` | - | - |
| 101 | 菜单 | 角色管理 | `system:role:query` | `role` | `system/role/index` |
| 1011 | 按钮 | └─ 查询 | `system:role:query` | - | - |
| 1012 | 按钮 | └─ 新增 | `system:role:create` | - | - |
| 1013 | 按钮 | └─ 编辑 | `system:role:update` | - | - |
| 1014 | 按钮 | └─ 删除 | `system:role:delete` | - | - |
| 1015 | 按钮 | └─ 分配权限 | `system:role:assign-menu` | - | - |
| 102 | 菜单 | 菜单管理 | `system:menu:query` | `menu` | `system/menu/index` |
| 1021 | 按钮 | └─ 查询 | `system:menu:query` | - | - |
| 1022 | 按钮 | └─ 新增 | `system:menu:create` | - | - |
| 1023 | 按钮 | └─ 编辑 | `system:menu:update` | - | - |
| 1024 | 按钮 | └─ 删除 | `system:menu:delete` | - | - |

### 2. 研发工具模块

| ID | 层级 | 菜单名称 | 权限标识 | 路由路径 | 组件路径 |
|-----|------|---------|---------|----------|----------|
| **2** | 目录 | **研发工具** | - | `/dev` | `Layout` |
| 200 | 菜单 | 代码生成 | `codegen:table:query` | `codegen` | `codegen/TableList` |
| 2001 | 按钮 | └─ 查询 | `codegen:table:query` | - | - |
| 2002 | 按钮 | └─ 导入 | `codegen:table:import` | - | - |
| 2003 | 按钮 | └─ 编辑 | `codegen:table:update` | - | - |
| 2004 | 按钮 | └─ 删除 | `codegen:table:delete` | - | - |
| 2005 | 按钮 | └─ 预览 | `codegen:table:preview` | - | - |
| 2006 | 按钮 | └─ 生成 | `codegen:table:generate` | - | - |

---

## 🎯 权限标识规范

### 命名规则
```
格式：模块:功能:操作
示例：system:user:create
```

### 操作类型
- `query` - 查询/查看
- `create` - 新增/创建
- `update` - 更新/编辑
- `delete` - 删除
- `import` - 导入
- `export` - 导出
- `preview` - 预览
- `generate` - 生成
- `assign-menu` - 分配菜单（特殊操作）

---

## 🔗 后端接口对照

### 用户管理接口
| 权限标识 | 接口路径 | 方法 |
|---------|----------|------|
| `system:user:query` | `/api/system/user/page` | GET |
| `system:user:create` | `/api/system/user` | POST |
| `system:user:update` | `/api/system/user/{id}` | PUT |
| `system:user:delete` | `/api/system/user/{id}` | DELETE |

### 角色管理接口
| 权限标识 | 接口路径 | 方法 |
|---------|----------|------|
| `system:role:query` | `/api/system/role/list` | GET |
| `system:role:create` | `/api/system/role` | POST |
| `system:role:update` | `/api/system/role/{id}` | PUT |
| `system:role:delete` | `/api/system/role/{id}` | DELETE |
| `system:role:assign-menu` | `/api/system/role/assign-menu` | POST |

### 菜单管理接口
| 权限标识 | 接口路径 | 方法 |
|---------|----------|------|
| `system:menu:query` | `/api/system/menu/tree` | GET |
| `system:menu:create` | `/api/system/menu` | POST |
| `system:menu:update` | `/api/system/menu/{id}` | PUT |
| `system:menu:delete` | `/api/system/menu/{id}` | DELETE |

### 代码生成接口
| 权限标识 | 接口路径 | 方法 |
|---------|----------|------|
| `codegen:table:query` | `/api/codegen/tables` | GET |
| `codegen:table:import` | `/api/codegen/import` | POST |
| `codegen:table:update` | `/api/codegen/tables/{id}` | PUT |
| `codegen:table:delete` | `/api/codegen/tables/{id}` | DELETE |
| `codegen:table:preview` | `/api/codegen/preview/{id}` | GET |
| `codegen:table:generate` | `/api/codegen/generate/{id}` | POST |

---

## 📝 使用说明

### 1. 初始化菜单数据

**全新安装（推荐）：**
```bash
mysql -u root -p database_name < init_menu_full.sql
```

**已有系统（增量更新）：**
```bash
mysql -u root -p database_name < V20251003_5__update_menu_codegen.sql
```

### 2. 查看当前菜单

```sql
-- 查看所有菜单（树形结构）
SELECT 
    CONCAT(
        CASE type 
            WHEN 1 THEN '📁 ' 
            WHEN 2 THEN '📄 ' 
            WHEN 3 THEN '  ├─ ' 
        END,
        name
    ) AS 菜单名称,
    permission AS 权限标识,
    path AS 路由路径,
    component AS 组件路径
FROM system_menu
ORDER BY parent_id, sort;
```

### 3. 查看角色权限

```sql
-- 查看超级管理员的所有权限
SELECT 
    m.name AS 菜单名称,
    m.permission AS 权限标识,
    m.type AS 类型
FROM system_role_menu rm
JOIN system_menu m ON rm.menu_id = m.id
WHERE rm.role_id = 1
ORDER BY m.id;
```

---

## 🔧 扩展指南

### 添加新模块

1. **添加目录**（ID: 3, 4, 5...）
```sql
INSERT INTO `system_menu` 
(`id`, `name`, `type`, `sort`, `parent_id`, `path`, `icon`, `component`) 
VALUES (3, '新模块', 1, 3, 0, '/new-module', 'icon-name', 'Layout');
```

2. **添加菜单**（ID: 300-399）
```sql
INSERT INTO `system_menu` 
(`id`, `name`, `permission`, `type`, `sort`, `parent_id`, `path`, `component`) 
VALUES (300, '功能页面', 'module:function:query', 2, 1, 3, 'function', 'module/function/index');
```

3. **添加按钮**（ID: 3001-3099）
```sql
INSERT INTO `system_menu` 
(`id`, `name`, `permission`, `type`, `sort`, `parent_id`) 
VALUES (3001, '操作', 'module:function:action', 3, 1, 300);
```

---

## 📅 版本记录

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2025-10-03 | 初始版本，包含系统管理和代码生成模块 |

---

**📅 创建时间：** 2025-10-03  
**👨‍💻 维护者：** nexus-codegen-team



